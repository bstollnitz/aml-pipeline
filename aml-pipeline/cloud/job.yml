$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json

type: command
description: Trains a simple neural network on the Fashion-MNIST dataset.
compute: azureml:cluster-gpu

inputs:
  fashion_mnist:
    path: azureml:data-fashion-mnist@latest
outputs:
  trained_model_output:
    type: mlflow_model

code: ../src
environment:
  image: mcr.microsoft.com/azureml/openmpi3.1.2-cuda10.2-cudnn8-ubuntu18.04:latest
  conda_file: conda-mlflow.yml
  # build:
  #   path: environment/
command: python train.py --data_dir ${{inputs.fashion_mnist}} --model_dir ${{outputs.trained_model_output}}
